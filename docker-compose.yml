version: '3.8'

# ============================================
# Vue Frontend - Docker Compose
# 로컬 개발 및 테스트용 설정
# ============================================

services:
  # ==========================================
  # Vue.js Frontend Service
  # ==========================================
  vue-frontend:
    container_name: healthyreal-vue-container
    build:
      context: .
      dockerfile: Dockerfile
    image: healthyreal-vue:latest
    ports:
      - "7001:7001"
    networks:
      - healthyreal-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://15.164.146.96:7001/"]
      interval: 30s
      timeout: 3s
      start_period: 40s
      retries: 3
    labels:
      - "service=vue-frontend"
      - "environment=development"

# ==========================================
# Networks
# ==========================================
networks:
  healthyreal-network:
    driver: bridge
    name: healthyreal-network

# ==========================================
# 사용법
# ==========================================
# 빌드 및 실행: docker-compose up -d
# 로그 확인: docker-compose logs -f
# 중지: docker-compose down
# 재빌드: docker-compose up -d --build

